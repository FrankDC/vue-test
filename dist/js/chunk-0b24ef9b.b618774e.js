(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0b24ef9b"],{"07f1":function(t,e,a){},"0e94":function(t,e,a){},2552:function(t,e,a){"use strict";var s=a("07f1");a.n(s).a},2563:function(t,e,a){},"25f0":function(t,e,a){"use strict";var s=a("6eeb"),o=a("825a"),r=a("d039"),i=a("ad6d"),n="toString",l=RegExp.prototype,c=l[n],d=r(function(){return"/a/b"!=c.call({source:"a",flags:"b"})}),u=c.name!=n;(d||u)&&s(RegExp.prototype,n,function(){var t=o(this),e=String(t.source),a=t.flags;return"/"+e+"/"+String(void 0===a&&t instanceof RegExp&&!("flags"in l)?i.call(t):a)},{unsafe:!0})},4457:function(t,e,a){},"7e6e":function(t,e,a){"use strict";var s=a("2563");a.n(s).a},"915e":function(t,e,a){t.exports=a.p+"img/avatar.e49a6382.jpg"},a8aa:function(t,e,a){},b0bc:function(t,e,a){"use strict";var s=a("4457");a.n(s).a},b5d4:function(t,e,a){"use strict";var s=a("0e94");a.n(s).a},b6cf:function(t,e,a){"use strict";var s=a("a8aa");a.n(s).a},bb51:function(t,e,a){"use strict";a.r(e);var s=(a("d3b7"),a("25f0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header-container"},[s("div",{staticClass:"header"},[s("div",{staticClass:"section"},[s("img",{staticClass:"logo",attrs:{src:a("cf05"),alt:"logo"}}),s("ul",[s("li",[s("router-link",{staticClass:"active",attrs:{to:"/home"}},[t._v("首页")])],1),t._m(0),t._m(1),t._m(2)])]),s("Dropdown",{attrs:{trigger:"hover"},on:{"on-click":t.changeMenu}},[s("a",{staticClass:"dropdown-link",attrs:{href:"javascript:void(0)"}},[s("span",{staticClass:"username"},[t._v(t._s(t.username))]),s("img",{staticClass:"avatar",attrs:{src:a("915e"),alt:""}}),s("Icon",{attrs:{type:"ios-arrow-down",size:"14"}})],1),s("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[s("DropdownItem",{attrs:{name:"a"}},[t._v("修改密码")]),s("DropdownItem",{attrs:{name:"b"}},[t._v("退出")])],1)],1)],1),s("a",{staticClass:"github-corner",attrs:{href:"https://github.com/jackchen0120",target:"_blank"}},[s("svg",{attrs:{width:"82",height:"82",viewBox:"0 0 250 250"}},[s("path",{attrs:{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}}),s("path",{staticClass:"octo-arm",attrs:{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor"}}),s("path",{staticClass:"octo-body",attrs:{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor"}})])]),s("Modal",{attrs:{title:"修改密码",loading:t.modalLoading,"class-name":"vertical-center-modal"},on:{"on-ok":t.ok},model:{value:t.modal,callback:function(e){t.modal=e},expression:"modal"}},[s("Form",{ref:"formItem",attrs:{model:t.formItem,"label-width":90}},[s("FormItem",{attrs:{label:"旧密码",prop:"oldPassword"}},[s("Input",{attrs:{type:"password",maxlength:"20",placeholder:"请输入旧密码"},model:{value:t.formItem.oldPassword,callback:function(e){t.$set(t.formItem,"oldPassword",e)},expression:"formItem.oldPassword"}})],1),s("FormItem",{attrs:{label:"新密码",prop:"newPassword"}},[s("Input",{attrs:{type:"password",maxlength:"20",placeholder:"请输入新密码"},model:{value:t.formItem.newPassword,callback:function(e){t.$set(t.formItem,"newPassword",e)},expression:"formItem.newPassword"}})],1),s("FormItem",{attrs:{label:"确认新密码",prop:"confirmPassword"}},[s("Input",{attrs:{type:"password",maxlength:"20",placeholder:"请再次确认新密码"},model:{value:t.formItem.confirmPassword,callback:function(e){t.$set(t.formItem,"confirmPassword",e)},expression:"formItem.confirmPassword"}})],1)],1)],1)],1)}),o=a("7c15"),r={name:"Header",components:{},data:function(){return{modal:!1,modalLoading:!0,username:this.$store.state.userInfo.data.userData.username,formItem:{oldPassword:"",newPassword:"",confirmPassword:""}}},computed:{},created:function(){},mounted:function(){},methods:{changeMenu:function(t){"a"==t?(this.modal=!0,this.$refs.formItem.resetFields()):"b"==t&&this.$store.dispatch("userInfo/logout")},ok:function(){var t=this;if(setTimeout(function(){t.modalLoading=!1,t.$nextTick(function(){t.modalLoading=!0})},100),!this.$Valid.validPass(this.formItem.oldPassword))return this.$Message.error("旧密码应为8到20位字母或数字！"),!1;if(!this.$Valid.validPass(this.formItem.newPassword))return this.$Message.error("新密码应为8到20位字母或数字！"),!1;if(!this.$Valid.validPass(this.formItem.confirmPassword))return this.$Message.error("确认密码有误"),!1;if(this.formItem.confirmPassword!==this.formItem.newPassword)return this.$Message.error("两次密码不一致"),!1;var e={username:this.$store.state.userInfo.data.userData.username,oldPassword:this.formItem.oldPassword,newPassword:this.formItem.confirmPassword};Object(o.g)(e).then(function(e){0==e.code?(t.modal=!1,t.$Message.success("修改密码成功")):t.$Message.error(e.msg)})}}},i=(a("7e6e"),a("2552"),a("2877")),n={name:"Footer",components:{},data:function(){return{}},computed:{},created:function(){},mounted:function(){},methods:{}},l={name:"Home",components:{Header:Object(i.a)(r,s,[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{attrs:{href:"https://jackchen0120.github.io/vueDataV/",target:"_blank"}},[t._v("大数据可视化平台")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{attrs:{href:"https://juejin.im/user/5eafd5fff265da7be959f56a",target:"_blank"}},[t._v("掘金·博文")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("li",[a("a",{attrs:{href:"https://blog.csdn.net/qq_15041931",target:"_blank"}},[t._v("CSDN·博文")])])}],!1,null,"d4d850dc",null).exports,Footer:(a("b6cf"),Object(i.a)(n,function(){var t=this;t.$createElement;return t._self._c,t._m(0)},[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer-container"},[a("div",{staticClass:"footer"},[a("div",{staticClass:"copyright"},[t._v(" Copyright@2020-2025 微信公众号<懒人码农> 湘ICP备19016532号-1 ")])])])}],!1,null,"db2f416e",null)).exports},data:function(){var t=this;return{loading:!0,total:0,pageNo:1,pageSize:10,status:null,textBtn:"提交",type:1,title:"添加任务",isShow:!1,styles:{height:"calc(100% - 55px)",overflow:"auto",paddingBottom:"53px",position:"static"},formValidate:{title:"",date:"",content:""},columns:[{title:"序号",type:"index",width:80,align:"center"},{title:"任务名称",key:"title",render:function(e,a){var s=t.tableData[a.index].is_major;return e("div",[e("Icon",{style:0===s?{cursor:"pointer",fontSize:"18px"}:{cursor:"pointer",fontSize:"18px",color:"#f50"},props:{type:0===s?"ios-star-outline":"ios-star"},nativeOn:{click:function(){t.toggleFav(a.row,a.index)}}}),e("span"," "+a.row.title)])}},{title:"任务内容",key:"content"},{title:"截止日期",key:"gmt_expire",render:function(e,a){var s=a.row;return e("div",t.$Valid.formatDate(s.gmt_expire))}},{title:"任务状态",key:"status",width:120,render:function(t,e){var a=e.row;return t("div",0==a.status?"待办":1==a.status?"完成":"删除")},filters:[{label:"待办",value:0},{label:"完成",value:1},{label:"删除",value:2}],filterMultiple:!1,filterRemote:function(t,e){var a=this;a.status=t[0],a.pageNo=1,a.getTaskList()}},{title:"操作",width:300,slot:"action",align:"center"}],tableData:[],ruleValidate:{title:[{required:!0,message:"任务名称不能为空",trigger:"blur"}],date:[{required:!0,type:"date",message:"请选择截止日期",trigger:"change"}],content:[{required:!0,message:"请输入任务内容",trigger:"blur"}]}}},computed:{},created:function(){},mounted:function(){this.getTaskList()},methods:{handleCurrentChange:function(t){this.pageNo=t,this.getTaskList()},getTaskList:function(){var t=this;this.loading=!0;var e={pageNo:this.pageNo,pageSize:this.pageSize,status:this.status};Object(o.e)(e).then(function(e){t.loading=!1,0==e.code&&e.data?(t.tableData=e.data.rows,t.total=e.data.total):(t.tableData=[],t.total=0)}).catch(function(){t.loading=!1})},addTask:function(){this.isShow=!0,this.textBtn="提交",this.title="添加任务",this.type=1,this.$refs.formValidate.resetFields()},edit:function(t,e){this.isShow=!0,this.textBtn="保存",this.title="编辑任务",this.type=2,this.formValidate={id:t.id,title:t.title,date:this.$Valid.formatDate(t.gmt_expire),content:t.content}},complete:function(t){var e=this,a=0==t.status?1:1==t.status?0:null,s={id:t.id,status:a};Object(o.i)(s).then(function(t){0==t.code?(e.pageNo=1,e.getTaskList(),e.$Message.success("更新任务状态成功")):e.$Message.error(t.msg)})},remove:function(t){var e=this,a={id:t,status:2};Object(o.b)(a).then(function(t){0==t.code?(e.pageNo=1,e.getTaskList(),e.$Message.success("任务删除成功")):e.$Message.error(t.msg)})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;if(1==e.type){var a={title:e.formValidate.title,gmt_expire:new Date(e.formValidate.date.toString()).getTime(),content:e.formValidate.content};Object(o.a)(a).then(function(t){e.isShow=!1,0==t.code?(e.pageNo=1,e.getTaskList(),e.$Message.success("".concat(e.title,"成功"))):e.$Message.error(t.msg)}).catch(function(){e.isShow=!1})}else if(2==e.type){var s={id:e.formValidate.id,title:e.formValidate.title,gmt_expire:new Date(e.formValidate.date.toString()).getTime(),content:e.formValidate.content};Object(o.c)(s).then(function(t){e.isShow=!1,0==t.code?(e.pageNo=1,e.getTaskList(),e.$Message.success("".concat(e.title,"成功"))):e.$Message.error(t.msg)}).catch(function(){e.isShow=!1})}})},handleReset:function(t){this.$refs[t].resetFields()},toggleFav:function(t,e){var a=this;if(2==t.status)this.$Message.error("数据已删除");else{this.tableData[e].is_major=0===this.tableData[e].is_major?1:0;var s={id:t.id,is_major:this.tableData[e].is_major};Object(o.h)(s).then(function(t){0==t.code?(a.pageNo=1,a.getTaskList(),a.$Message.success("更新标记成功")):a.$Message.error(t.msg)})}}}},c=(a("b0bc"),a("b5d4"),Object(i.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home-container"},[a("Header"),a("div",{staticClass:"content clearfix"},[a("div",{staticClass:"list"},[a("h2",[t._v("任务列表")]),a("Button",{attrs:{type:"primary",icon:"md-add",size:"large"},on:{click:t.addTask}},[t._v("添加任务")])],1),a("Table",{attrs:{loading:t.loading,border:"",columns:t.columns,data:t.tableData},scopedSlots:t._u([{key:"action",fn:function(e){var s=e.row,o=e.index;return[2!=s.status?a("Button",{staticStyle:{"margin-right":"10px"},on:{click:function(e){return t.edit(s,o)}}},[t._v("编辑")]):t._e(),2!=s.status?a("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",ghost:""},on:{click:function(e){return t.complete(s)}}},[t._v(t._s(0==s.status?"完成":1==s.status?"待办":null))]):t._e(),2!=s.status?a("Button",{attrs:{type:"error",ghost:""},on:{click:function(e){return t.remove(s.id)}}},[t._v("删除")]):t._e()]}}])}),!t.loading&&t.total>0?a("Page",{attrs:{"class-name":"pagination","show-total":"",total:t.total,"page-size":t.pageSize,current:t.pageNo},on:{"on-change":t.handleCurrentChange}}):t._e()],1),a("Footer"),a("Drawer",{attrs:{title:t.title,width:"600",styles:t.styles,"mask-closable":!1},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate}},[a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"任务名称",prop:"title","label-position":"top"}},[a("Input",{attrs:{placeholder:"请输入任务名称"},model:{value:t.formValidate.title,callback:function(e){t.$set(t.formValidate,"title",e)},expression:"formValidate.title"}})],1)],1)],1),a("Row",{attrs:{gutter:32}},[a("Col",{attrs:{span:"24"}},[a("FormItem",{attrs:{label:"截止日期",prop:"date","label-position":"top"}},[a("DatePicker",{staticStyle:{display:"block"},attrs:{editable:!1,type:"date",placeholder:"请选择截止日期"},model:{value:t.formValidate.date,callback:function(e){t.$set(t.formValidate,"date",e)},expression:"formValidate.date"}})],1)],1)],1),a("FormItem",{attrs:{label:"任务内容",prop:"content","label-position":"top"}},[a("Input",{attrs:{type:"textarea",rows:8,placeholder:"请输入任务内容"},model:{value:t.formValidate.content,callback:function(e){t.$set(t.formValidate,"content",e)},expression:"formValidate.content"}})],1)],1),a("div",{staticClass:"demo-drawer-footer"},[a("Button",{staticStyle:{"margin-right":"15px"},attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v(t._s(t.textBtn))]),a("Button",{staticStyle:{"margin-right":"15px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("重置")]),a("Button",{attrs:{type:"error",ghost:""},on:{click:function(e){t.isShow=!1}}},[t._v("取消")])],1)],1)],1)},[],!1,null,"168c9f69",null));e.default=c.exports}}]);